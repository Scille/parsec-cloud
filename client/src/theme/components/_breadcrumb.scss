/* Parsec Cloud (https://parsec.cloud) Copyright (c) BUSL-1.1 2016-present Scille SAS */

// must be at the top of the file
// at the moment, we are forced to put this in every scss file, since vite is not adding preprocessors additionalData to files imported by @use & @forward
@use 'megashark-lib/theme' as ms;

.header-breadcrumbs {
  display: flex;
  align-items: center;
  width: 100%;

  @include ms.responsive-breakpoint('sm') {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }
}

.breadcrumb-container {
  padding: 0;
  color: var(--parsec-color-light-secondary-grey);
  display: flex;
  flex-wrap: nowrap;

  .breadcrumb-element {
    min-height: 2.25rem;

    .main-icon {
      font-size: 1.125rem;
    }

    &::part(native) {
      cursor: pointer;
      padding: 0.25rem 0.5rem;
    }

    &::part(separator) {
      margin-inline: 0;
      color: var(--parsec-color-light-secondary-grey);
      cursor: default;
    }

    &::part(collapsed-indicator) {
      border-radius: var(--parsec-radius-8);
      background: var(--parsec-color-light-secondary-medium);
      color: var(--parsec-color-light-secondary-grey);
      margin-inline: 0.5rem;
    }

    &:hover:not(.breadcrumb-collapsed) {
      color: var(--parsec-color-light-secondary-text);
      position: relative;
      cursor: default;

      &::after {
        content: '';
        position: absolute;
        width: calc(100% - 0.25rem);
        height: 100%;
        border-radius: var(--parsec-radius-8);
        background: var(--parsec-color-light-secondary-medium);
        opacity: 0.6;
        z-index: -10;
      }

      @include ms.responsive-breakpoint('md') {
        &::after {
          left: 0.5rem;
          width: calc(100% - 1.25rem);
        }
      }
    }

    .breadcrumb-text {
      overflow-x: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-size: 1rem;
      pointer-events: none;
      cursor: default;
    }

    &--active:not(.breadcrumb-element--home) {
      color: var(--parsec-color-light-secondary-text);
      --background: none;

      &::part(native) {
        border-radius: var(--parsec-radius-6);
      }

      .breadcrumb-text {
        pointer-events: none;
        cursor: default;
      }

      &:hover:not(.breadcrumb-collapsed) {
        color: var(--parsec-color-light-primary-700);
        position: relative;
      }
    }

    &--home {
      color: var(--parsec-color-light-primary-700);
      pointer-events: none;

      .main-icon {
        color: var(--parsec-color-light-primary-700);
        margin-right: 0.5rem;
      }
    }
  }
}

.breadcrumb-file-mobile {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 0.75rem;
  border-radius: var(--parsec-radius-8);
  overflow: hidden;
  width: fit-content;
  white-space: nowrap;
  text-overflow: ellipsis;

  * {
    transition: all 0.15s ease-in-out;
  }

  &__title {
    color: var(--parsec-color-light-primary-800);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  &__icon {
    color: var(--parsec-color-light-secondary-text);
    font-size: 0.75rem;
    padding: 0.125rem;
    flex-shrink: 0;
    border-radius: var(--parsec-radius-circle);
    background: var(--parsec-color-light-secondary-medium);
  }

  &.is_browsing {
    cursor: pointer;
    transition: all 0.15s ease-in-out;

    &:hover {
      background: var(--parsec-color-light-secondary-medium);

      .breadcrumb-file-mobile__icon {
        background: var(--parsec-color-light-secondary-soft-grey);
        color: var(--parsec-color-light-secondary-white);
      }
    }
  }
}
