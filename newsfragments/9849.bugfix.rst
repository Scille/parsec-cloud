Fixes file opening and correctly displays an error message if it fails
